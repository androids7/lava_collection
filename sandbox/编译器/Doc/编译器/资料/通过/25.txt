long aaa;
int year1;
char month1;
char day1;
char hour1;
char minute1;
char second1;
char week1;

char logo[]={0xFF,0xC0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x7,0xFE,0x8C,0x40,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x4,0x62,0xB3,0x40,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x5,0x9A,0xA1,0x40,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0xF,0x80,0x0,0x5,0xA,0xC0,0xC0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x1,0xFF,0xFC,0x0,0x6,0x6,0xC0,0xC0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x2,0xF0,0x7A,0x0,0x6,0x6,0xA1,0x40,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0xF,0x0,0x7,0x80,0x5,0xA,0xB3,0x40,0x0,0x0,0x0,0x30,0x0,0x0,0x0,0x0,0x3,0x80,0x0,0x0,0x14,0x2,0x1,0x40,0x5,0x9A,0x8C,0x40,0x0,0xF,0x7,0xF8,0x0,0xF,0xFC,0x0,0xF,0xC1,0xF8,0x0,0x38,0x2,0x0,0xE0,0x4,0x62,0xFF,0xC0,0x0,0x1B,0x8F,0xEC,0x0,0x1E,0xE,0x0,0x1D,0xC3,0xBC,0x0,0x60,0x0,0x0,0x30,0x7,0xFE,0xFF,0xC0,0x0,0x3B,0x9B,0xEE,0x0,0x7F,0xC7,0x0,0x19,0xC7,0x3C,0x0,0xC0,0x0,0x0,0x18,0x7,0xFE,0x8C,0x40,0x0,0x33,0xBF,0xE6,0x0,0xFF,0xF3,0x80,0x1D,0xCF,0xFC,0x1,0x48,0x0,0x0,0x94,0x4,0x62,0xB3,0x40,0x0,0x77,0xB7,0xF7,0x0,0xFF,0xF9,0xC0,0xD,0xDF,0xF8,0x1,0x84,0x0,0x1,0xC,0x5,0x9A,0xA1,0x40,0x0,0x67,0x77,0x37,0x1,0xF8,0x1D,0xC0,0xD,0xFF,0x80,0x3,0x0,0x0,0x0,0x6,0x5,0xA,0xC0,0xC0,0x0,0xCF,0xEF,0x33,0x3,0xF0,0xC,0xC0,0xD,0xFE,0x0,0x5,0x0,0x0,0x0,0x5,0x6,0x6,0xC0,0xC0,0x0,0xDF,0xCE,0x3B,0x3,0xE0,0xE,0xC0,0xD,0xFC,0x0,0x6,0x4,0x0,0x0,0x3,0x6,0x6,0xA1,0x40,0x1,0xDD,0xEC,0x1B,0x3,0xE0,0x6,0xC0,0xE,0xF0,0x0,0x6,0x2,0x0,0x0,0x3,0x5,0xA,0xB3,0x40,0x1,0xBB,0xFC,0x1B,0x7,0xC0,0x6,0xC0,0x6,0xE0,0x0,0x6,0x1,0x0,0x20,0x3,0x5,0x9A,0x8C,0x40,0x3,0xB7,0xFC,0x1B,0x6,0xE0,0x6,0xC0,0x6,0xC0,0x0,0x6,0x0,0xC0,0x40,0x3,0x4,0x62,0xFF,0xC0,0x3,0x7F,0xFC,0x1B,0x6,0x60,0x7,0xC0,0xE,0xE0,0x0,0xC,0x0,0x20,0x80,0x1,0x87,0xFE,0xFF,0xC0,0x3,0x7F,0xFC,0x1F,0x6,0xE0,0x7,0x80,0x1F,0x60,0x0,0xC,0x0,0x13,0x0,0x1,0x87,0xFE,0x8C,0x40,0x7,0xFF,0x7C,0x1F,0x7,0xE0,0xF,0x80,0x3F,0x60,0x0,0xC,0xC0,0xF,0x0,0x19,0x84,0x62,0xB3,0x40,0x6,0xFF,0x6C,0x1F,0x3,0xC0,0xF,0x80,0x7F,0x70,0xF8,0xC,0x0,0x2,0x0,0x1,0x85,0x9A,0xA1,0x40,0x6,0xFE,0x6C,0x3E,0x3,0xC0,0x1F,0x80,0xFF,0x38,0xD8,0xC,0x0,0x0,0x0,0x1,0x85,0xA,0xC0,0xC0,0x7,0xFC,0x6E,0x3E,0x1,0x80,0x7F,0x1,0xFD,0x98,0xF8,0x6,0x0,0x0,0x0,0x3,0x6,0x6,0xC0,0xC0,0xF,0xFC,0x77,0x7E,0x1F,0xF0,0xFF,0x1,0xF9,0x8F,0xF8,0x6,0x0,0x0,0x0,0x3,0x6,0x6,0xA1,0x40,0xD,0xF8,0x33,0xFC,0x18,0x1F,0xFE,0x3,0xF8,0xC7,0xF8,0x6,0x0,0x0,0x0,0x3,0x5,0xA,0xB3,0x40,0xC,0xF8,0x38,0x7C,0x18,0x7,0xFC,0x7,0x70,0xE0,0xF8,0x6,0x0,0x0,0x0,0x3,0x5,0x9A,0x8C,0x40,0xF,0xF0,0x1F,0xFC,0x1E,0x1,0xF8,0xE,0xF8,0x7F,0xF8,0x5,0x0,0x0,0x0,0x5,0x4,0x62,0xFF,0xC0,0x7,0xE0,0xF,0xF8,0xF,0xFC,0x7B,0xDD,0xF8,0x3F,0xF0,0x3,0x2,0x0,0x1,0x6,0x7,0xFE,0xFF,0xC0,0x7,0xE0,0x7,0xF0,0x3,0xFF,0x1F,0xFF,0xF0,0xF,0xE0,0x1,0x84,0x0,0x0,0x8C,0x7,0xFE,0x8C,0x40,0x0,0x0,0x0,0x0,0x0,0x3F,0xC3,0xFF,0xE0,0x0,0x0,0x1,0x40,0x0,0x0,0x14,0x4,0x62,0xB3,0x40,0x0,0x0,0x0,0x0,0x0,0x1,0xFF,0xFF,0xC0,0x0,0x0,0x0,0xC0,0x0,0x0,0x18,0x5,0x9A,0xA1,0x40,0x0,0x1E,0x0,0x0,0x0,0x0,0xFF,0xE7,0x80,0x0,0x0,0x0,0x60,0x0,0x0,0x30,0x5,0xA,0xC0,0xC0,0x0,0x17,0x80,0x0,0x0,0x0,0x3F,0xC0,0x0,0x0,0x0,0x0,0x38,0x2,0x0,0xE0,0x6,0x6,0xC0,0xC0,0x18,0x14,0xC0,0x0,0x0,0x0,0x7,0xC0,0x0,0x0,0x0,0x0,0x14,0x2,0x1,0x40,0x6,0x6,0xA1,0x40,0x34,0x14,0x40,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0xF,0x0,0x7,0x80,0x5,0xA,0xB3,0x40,0x62,0x14,0x60,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x2,0xF0,0x7A,0x0,0x5,0x9A,0x8C,0x40,0xC6,0x34,0x20,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x1,0xFF,0xFC,0x0,0x4,0x62,0xFF,0xC0,0x8A,0x24,0x20,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0xF,0x80,0x0,0x7,0xFE,0xFF,0xC1,0x92,0x24,0x20,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x7,0xFE,0x8C,0x41,0x22,0x64,0x20,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x4,0x62,0xB3,0x41,0x63,0xC8,0x20,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x5,0x9A,0xA1,0x41,0x63,0x18,0x20,0x0,0x0,0x0,0x0,0x7,0xFF,0x7F,0xFC,0x0,0x3F,0x80,0xFE,0x0,0x5,0xA,0xC0,0xC1,0x41,0xF0,0x60,0x0,0x0,0x0,0x0,0x7,0xFF,0xFF,0xFC,0x0,0x3F,0x81,0xFE,0x0,0x6,0x6,0xC0,0xC1,0x40,0x0,0x43,0x7F,0xFF,0xFF,0xF8,0x7,0xFE,0xFF,0xFC,0x0,0x3F,0xFF,0xFF,0xFE,0x6,0x6,0xA1,0x41,0x40,0x0,0xC3,0xDF,0xFF,0xFF,0xF8,0x7,0xFF,0xFF,0xFC,0x1,0xBF,0xFF,0xFF,0xFE,0x5,0xA,0xB3,0x40,0xC0,0x1,0x83,0xF7,0xFF,0xFF,0xF8,0x7,0xF0,0x0,0xFC,0x1,0xDF,0xFF,0xFF,0xFE,0x5,0x9A,0x8C,0x40,0x40,0x1,0x3,0xFB,0xFF,0xFF,0xF8,0x7,0xF9,0xFF,0xFC,0x3,0xF7,0xFF,0xFF,0xFE,0x4,0x62,0xFF,0xC0,0x60,0x2,0x3,0xFD,0xFF,0xFF,0xF8,0x7,0xFB,0xFF,0xFC,0x7,0xFB,0xFF,0xFF,0xFE,0x7,0xFE,0xFF,0xC0,0x30,0x2,0x3,0xFF,0xFF,0xFF,0xF8,0x7,0xFF,0xFF,0xFC,0x1,0xF1,0xFB,0xF7,0xE0,0x7,0xFE,0x8C,0x40,0x18,0x2,0x3,0xFE,0x7F,0xFF,0xF8,0x7,0xFF,0x7,0xFC,0x0,0xE6,0xF9,0xE7,0xE0,0x4,0x62,0xB3,0x40,0xC,0xF,0x0,0x0,0x1F,0xC0,0x0,0x7,0xF3,0xF8,0xFC,0x0,0x7F,0xFB,0xFF,0xFC,0x5,0x9A,0xA1,0x40,0x36,0x71,0x0,0x0,0x1F,0xC0,0x0,0x7,0xF7,0xFF,0xFC,0x0,0x1F,0x83,0xFF,0xFC,0x5,0xA,0xC0,0xC0,0x63,0x81,0x0,0x0,0x1F,0xC0,0x0,0x7,0xF7,0xFF,0xFC,0x0,0x1F,0x83,0xFF,0xFC,0x6,0x6,0xC0,0xC0,0x44,0x4,0x80,0x0,0x1F,0xC0,0x0,0x7,0xFF,0xFF,0xFC,0x3,0xFF,0xEF,0xFF,0xFC,0x6,0x6,0xA1,0x40,0x4C,0x7C,0x80,0x0,0x1F,0xC0,0x0,0x7,0xF0,0x0,0xFC,0x3,0xFF,0xF3,0xFF,0xFC,0x5,0xA,0xB3,0x40,0x49,0xC0,0x80,0x0,0xF,0xC0,0x0,0x7,0xF7,0xFF,0xFC,0x3,0xFF,0xFB,0xF9,0xFC,0x5,0x9A,0x8C,0x40,0x4B,0x4,0x80,0x0,0x6F,0xC0,0x0,0x7,0xF7,0xFF,0xFC,0x3,0xFF,0xFF,0xFF,0xFC,0x4,0x62,0xFF,0xC0,0x4A,0x4,0x80,0x0,0x77,0xC0,0x0,0x7,0xF7,0xFF,0xFC,0x3,0xFF,0xF3,0xFF,0xFC,0x7,0xFE,0xFF,0xC0,0x4A,0x4,0x80,0x0,0x77,0xC0,0x0,0x7,0xE0,0x0,0xFE,0x0,0x3F,0xCD,0xFF,0xFC,0x7,0xFE,0x8C,0x40,0x4A,0x4,0x80,0x0,0x77,0xC0,0x0,0x3F,0xFF,0xFF,0xFF,0xC0,0x7F,0xEF,0xFF,0xFC,0x4,0x62,0xB3,0x40,0x4A,0x0,0x80,0x0,0x7B,0xC0,0x0,0x3F,0xFF,0xFF,0xFF,0xC0,0xFF,0xFF,0xF9,0xFC,0x5,0x9A,0xA1,0x40,0x4A,0x0,0x80,0x0,0x7C,0xC0,0x0,0x3F,0xFF,0xFF,0xFF,0xC0,0xFF,0xFF,0xF9,0xFC,0x5,0xA,0xC0,0xC0,0x4A,0xC,0x80,0x0,0x7E,0xC0,0x0,0x3F,0xFF,0xFF,0xFF,0xC1,0xFF,0xFF,0xBF,0xFC,0x6,0x6,0xC0,0xC0,0x4A,0xF8,0x80,0x0,0x7F,0x40,0x0,0x3F,0xEF,0xFF,0xFF,0xC3,0xFF,0xFF,0xDF,0xFC,0x6,0x6,0xA1,0x40,0x4B,0x80,0x87,0xFF,0xFF,0x8F,0xFC,0x0,0x6C,0x7,0xE0,0x3,0xFF,0xFF,0xF7,0xFC,0x5,0xA,0xB3,0x40,0x48,0x0,0x87,0xFF,0xFF,0xEF,0xFC,0x1,0xEE,0xF,0xF8,0x3,0xFF,0xFF,0xFD,0xFC,0x5,0x9A,0x8C,0x40,0x48,0x0,0x87,0xFF,0xFF,0xEF,0xFC,0xF,0xF7,0xF,0xFF,0x1,0xFF,0x8F,0xE1,0xFC,0x4,0x62,0xFF,0xC0,0x48,0x3C,0x87,0xFF,0xFF,0xF7,0xFC,0x3F,0xEF,0x8F,0xFF,0x81,0xDF,0x8F,0xFF,0x7C,0x7,0xFE,0xFF,0xC0,0x49,0xE1,0x87,0xFF,0xFF,0xFB,0xFC,0x3F,0xEF,0x8F,0xFF,0x80,0x1F,0x8F,0xFF,0xEC,0x7,0xFE,0x8C,0x40,0x48,0x1,0x7,0xFF,0xFF,0xFD,0xFC,0x1F,0xDF,0x3,0xFF,0x0,0x1F,0x8F,0xFF,0xF8,0x4,0x62,0xB3,0x40,0x48,0x1,0x7,0xFF,0xFF,0xFE,0xFC,0x1F,0xDC,0x0,0x7F,0x0,0x1F,0x8F,0xFF,0xF0,0x5,0x9A,0xA1,0x40,0x68,0x1,0x0,0x0,0x0,0x0,0x0,0xF,0x80,0x0,0xF,0x0,0x1F,0x8F,0xE3,0xF0,0x5,0xA,0xC0,0xC0,0x38,0x3,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0xF,0xE3,0xF0,0x6,0x6,0xC0,0xC0,0x18,0x6,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x6,0x6,0xA1,0x40,0xE,0x3E,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x5,0xA,0xB3,0x40,0x1,0xF0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x5,0x9A,0x8C,0x40,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x4,0x62,0xFF,0xC0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x7,0xFE};
char key;

char t1[20];char t3[20];char t2[20];

struct TIME
{
int year;
char month;
char day;
char hour;
char minute;
char second;
char week;
};

struct TIME time;


void time_print()   //显示系统时间
{
    GetTime(time);

	


year1=time.year;
month1=time.month;
day1=time.day;
hour1=time.hour;
minute1=time.minute;
second1=time.second;
week1=time.week;


sprintf(t1,"%d年%d月%d日",year1,month1,day1);

sprintf(t2,"%d:%d:%d",hour1,minute1,second1);

sprintf(t3,"星期%d【任意键暂停】",week1);

ClearScreen();
TextOut(1,1,t1,1);
TextOut(1,15,t2,1);
TextOut(1,29,t3,1);
       TextOut(90,5,"时间备份",0x81);
       Refresh();






Refresh();


} 





void time_save()   //备份系统时间
{
    char fp;
	    fp=fopen("/LavaData/tool.sav","w");

 GetTime(time);
     			fwrite(&year1,1,4,fp);
			fwrite(&month1,1,4,fp);
			fwrite(&day1,1,4,fp);

			fwrite(&hour1,1,4,fp);
			fwrite(&minute1,1,4,fp);
			fwrite(&second1,1,4,fp);
			fwrite(&week1,1,4,fp);
		
       TextOut(90,5,"备份成功",0x81);
      Block(89,4,152,19,2);
       Refresh();
  
 fclose(fp); 
    getchar();
} 
void time_set()  //重新设置系统时间

{
    time.year=year1;
    time.month=month1;
    time.day=day1;
    time.hour=hour1;
    time.minute=minute1;
    time.second=second1;
    SetTime(time);
 }


void time_read()   //读备份的系统时间
{
    char fp;
	   if ((fp=fopen("/LavaData/tool.sav","r"))==0)
       { SetScreen(0);Locate (2,4);printf("没有备份文件");key=getchar();return;}
	 else {
		rewind(fp);
     			fread(&year1,1,4,fp);
			fread(&month1,1,4,fp);
			fread(&day1,1,4,fp);

			fread(&hour1,1,4,fp);
			fread(&minute1,1,4,fp);
			fread(&second1,1,4,fp);
			fread(&week1,1,4,fp);
 
 		 fclose(fp); }
SetScreen(1);
    Locate (0,11);printf("%d年%d月%d日",year1,month1,day1);

    Locate (1,0);printf(" 备份时间  %d:%d:%d",hour1,minute1,second1);

    Locate (2,11);printf("星期%d",week1);

    Locate (4,8);printf("是否载入?(Yes/No?)");

	while(1)
{
	key=getchar();
	if (key==121) {time_set();SetScreen(0);Locate (2,2);printf("系统时间设置完毕");key=getchar();
break;}
	if (key==110){ key=0;return;}


			}

} 


void ASCII()
{
SetScreen(1);
Locate (0,1);printf("键值查寻器 \n请按键......");
Locate (2,5);printf("为你的ASCII值");
while (1)
{
key=getchar();
Locate (2,1);printf("%d ",key);

if (key==27) {getchar();return;}
}
}


void SETTIME()
{


while (!Inkey()) 
{


time_print();
Delay(100);
}

TextOut(31,29,"【跳出键返回】",1);
TextOut(100,62,"【请选择】",1);
TextOut(1,48,"1.备份当前的时间",1);
TextOut(1,62,"2.载入备份的时间",1);

Refresh();


key=getchar();
if (key==98)	{time_save();}
if (key==110)	{time_read();}
if (key==27) return;
SETTIME();
}


void main()
{

	ClearScreen();
    WriteBlock(1,0,160,80,1,logo);
    Refresh();
    getchar();


for(;;)
{
ClearScreen();
TextOut(35,20,"1.系统时间设置",1);
TextOut(35,34,"2.星星键值查询",1);
TextOut(35,48,"3.退出本程序",1);
Refresh();
key=getchar();
if (key==98) {ClearScreen();SETTIME();}
if (key==110) {ClearScreen();ASCII();}
if (key==109) {SetScreen(1);printf("本软件由王梓恒制作\n欢迎来Filwu.ys168.com\n这里还有我的其它作品\n我的qq:20543816\nqq群:4733444\n                  再见");key=getchar();exit(0);}
}


}

